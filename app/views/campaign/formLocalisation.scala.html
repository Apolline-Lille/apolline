@(form:Form[LocalisationForm],fileError:String,campaign:Campagne,state:Html)(implicit request: Request[AnyContent])

@import models.template.InlineInput.inlineInput

@main(Messages("campaign.list.title")){
  @navigation("campaign")
  <div class="container">
    <section>
      <article>
        <a href="@routes.ConditionsManager.listConditions(campaign._id.stringify)"><span class="glyphicon glyphicon-arrow-left"></span> Retour</a>
        <div class="col-sm-12">
          <h4>@campaign.nom</h4>
          <div class="col-sm-11 col-sm-offset-1">
            <div class="row"><span class="bold">@Messages("campaign.list.type")</span> : @campaign.types</div>
          </div>
        </div>
        @state
        @helper.form(action=routes.ConditionsManager.addLocalisation(campaign._id.stringify),'enctype -> "multipart/form-data"){
          @for(error<-form.globalErrors){
            <div class="alert alert-danger" role="alert">@Html(error.message)</div>
          }
          <h5><button type="button" class="btn btn-success" onClick="setLocalisation()">Générer la localisation</button><span style="color:red;float:right"><em>*</em> @Messages("global.fieldRequired")</span></h5>
          <div class="col-sm-12">
            @helper.inputText(form("nom"),'_label->Messages("campaign.condition.localisation.nom"),'required->true,'class->"form-control",'autofocus->"autofocus")
            @helper.inputText(form("lat"),'_label->Messages("campaign.condition.localisation.lat"),'class->"form-control")
            @helper.inputText(form("lon"),'_label->Messages("campaign.condition.localisation.lon"),'class->"form-control")
            <div class=" col-sm-12 @if(fileError.nonEmpty) {has-error}">
              <label for="photo" class="control-label col-sm-3">
                @Messages("campaign.condition.localisation.photo")
                <button type="button" class="btn btn-default" onclick="addField('block_photo','line_photo')"><span class="glyphicon glyphicon-plus" style="color:green"></span></button>
              </label>
              <div class="input col-sm-8 col-sm-offset-1">
                <div id="block_photo">
                  <div class="line_photo">
                    <input name="photo[]" id="photo" type="file" accept="image/*"/>
                  </div>
                </div>
                <span class="control-label errors">@fileError</span>
              </div>
            </div>
            @helper.textarea(form("commentaire"),'_label->Messages("campaign.condition.localisation.commentaire"),'class->"form-control")
          </div>
          <div class="col-sm-12">
            <div style="float:right"> <input value="@Messages("global.btn.reset")" class="btn btn-default"
            type="reset"> <input value="@Messages("global.btn.submit")" class="btn btn-default" type="submit"></div>
          </div>
        }
      </article>
    </section>
  </div>
}